
zookeeper总结
=
### 2.1概念总结
#### 1.zookeeper是一个分布式的程序，半数以上的节点存活就可以继续使用
#### 2.zookeeper数据存储在内存，高吞吐量低延时
#### 3.zookeeper临时节点在会话期间存在，会话结束临时节点消失
#### 4.zookeeper是高性能的，特别适合“读”多余“写”的程序，因为写会导致服务器同步
#### 5.zookeeper底层其实只提供了数据管理和数据节点监听服务

### 2.2会话（session）
session指的是zookeeper服务器与客户端的会话。在会话创建前服务器会创建一个sessionID，无论哪台服务器分配的sessionID都全局唯一。客户端与zookeeper服务器是一个TCP长连接。客户端启动时会与服务器创建一个TCP长连接，客户端可以通过TCP连进行心跳检测保持有效的会话，可以通过TCP发送请求并且接受响应，并且还可以通过TCP连接接收来自服务器的watcher通知。sessionTimeout用来设置会话超时时间，当服务器负载较大或者网络原因中断连接，在sessionTimeout时间内如果重新连接上集群中任意一台服务器那么会话仍然有效。

### 2.3Znode
ZNode分为临时节点和持久节点，临时节点在会话有效时存在

### 2.4版本
zookeeper上每个ZNode会存储数据，对应每个ZNode会维护一个stat的数据结构，version（节点版本），sversion（子节点版本），aversion（acl版本）

### 2.5watcher
zookeeper允许用户在节点上注册watcher，当特定事件触发的时候，zookeeper服务端会将事件通知到客户端上，该机制是实现分布式协调服务的重要特性

### 2.5ACL
ACL（AccessControlLists）策略来管理用户权限
zookeeper定义了五种权限：
CREATE：创建子节点的权限
DELETE：删除子节点的权限
READ：读取节点数据和子节点列表的权限
WRITE：节点数据的权限
ADMIN：修改节点权限




## CAP概念总结
CAP(consistency一致性,availability可用性，partition-tolerance分区容忍性)。关系型数据库注重C和A，NOSQL数据库注重A和P，或C和P



